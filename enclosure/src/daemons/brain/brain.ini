[settings]
volume-minimum = 0
volume-initial = 50
volume-maximum = 100
volume-step = 5


[synapses]
control-rotary = hal9000
control-button = hal9000
volume-rotary = hal9000, sonos
volume-button = hal9000, sonos
rfid-enter = hal9000, brickies-inserted
rfid-leave = hal9000, brickies-removed


[trigger:control-rotary]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/rotary/event"
mqtt-payload-regex = "rotary:control:default status=(?P<control>[+-]\d+)"


[trigger:control-button]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/button/event"
mqtt-payload-regex = "button:control:select status=(?P<select>[01])"


[trigger:volume-rotary]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/rotary/event"
mqtt-payload-regex = "rotary:volume:default status=(?P<volume>[+-]?\d+)"


[trigger:volume-button]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/button/event"
mqtt-payload-regex = "button:volume:mute status=(?P<mute>[01])"


[trigger:rfid-enter]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/rfid/event"
mqtt-payload-regex = "rfid:\w+:\w+ (?P<event>\w+)=(?P<uid>\w{8})"


[trigger:rfid-leave]
module = hal9000.plugins.brain.mqtt
mqtt-topic = "hal9000/enclosure/rfid/event"
mqtt-payload-regex = "rfid:\w+:\w+ (?P<event>\w+)=(?P<uid>\w{8})"


[action:hal9000]
module = hal9000.plugins.brain.hal9000
data-regex-pattern = "..."
data-regex-repl = "..."
hal9000-control = dict:control
hal9000-select = dict:select
hal9000-volume = dict:volume
hal9000-mute = dict:mute


[action:sonos]
module = hal9000.plugins.brain.brickies
sonos-name = "Arbeitszimmer"
sonos-ip = 192.168.3.30
sonos-volume = dict:volume
sonos-mute = dict:mute


[action:brickies-inserted]
module = hal9000.plugins.brain.brickies
brickies-server = 192.168.4.1
brickies-port = 1883
brickies-reader-service = hal9000
brickies-reader-name = vince
brickies-card-event = inserted
brickies-card-uid = dict:uid


[action:brickies-removed]
module = hal9000.plugins.brain.brickies
brickies-server = 192.168.4.1
brickies-port = 1883
brickies-reader-service = hal9000
brickies-reader-name = vince
brickies-card-event = removed
brickies-card-uid = dict:uid


[mqtt]
server = 127.0.0.1
port = 1883


[python]
module-paths = "../../package", "./package"

